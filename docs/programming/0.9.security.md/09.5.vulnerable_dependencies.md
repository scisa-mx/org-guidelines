# Revisión de Dependencias Vulnerables  

## ¿Qué es una dependencia vulnerable?

Una dependencia vulnerable es una librería externa (NuGet, NPM, PyPI, Maven, etc.) que contiene una vulnerabilidad conocida públicamente (CVE).

Estas vulnerabilidades pueden permitir:

- Ejecución remota de código (RCE)
- Escalación de privilegios
- Exposición de información sensible
- Bypass de autenticación

Importante: Muchas veces la vulnerabilidad no está en nuestro código, sino en una dependencia transitiva:

Proyecto → Librería A → Librería B (vulnerable)

Por eso es crítico escanear automáticamente.

---

## Uso de Checkmarx en Pull Requests

En la organización, Checkmarx debe integrarse como control obligatorio en cada PR.

### Flujo recomendado

```text
Commit → Pull Request → Escaneo Checkmarx → Revisión → Merge
```
En los Prs es importante revisar constantemente los escaneos de Checkmarx, ya que esta herramienta es la encargada de identificar vulnerabilidades en las dependencias que se están utilizando en el proyecto, e solventar todas las vulnerabilidades que se identifiquen es fundamental para mantener la seguridad de la aplicación.

### ¿Qué debemos revisar en el PR?

Cuando Checkmarx marca vulnerabilidades:

1. Revisar severidad (Crítica, Alta, Media, Baja)
2. Identificar la dependencia afectada
3. Validar si existe versión parcheada
4. Actualizar antes de hacer merge

---

## Política sugerida

- Vulnerabilidades Críticas → Bloquean el merge
- Vulnerabilidades Altas → Requieren plan inmediato
- Vulnerabilidades Medias/Bajas → Documentar y priorizar

Si no es posible actualizar:

1. Documentar riesgo
2. Definir mitigación
3. Establecer fecha de corrección
4. Obtener aprobación de seguridad

Nunca ignorar sin registro formal.

---

## Buenas Prácticas

### 1. Actualizar frecuentemente
No acumular deuda técnica.  
Realizar revisiones periódicas de dependencias.

### 2. Fijar versiones
Evitar usar:
- `latest`
- Versiones flotantes (`^`, `~`)

Usar versiones explícitas y controladas. 
Esto puede ser un arma de doble filo, debido a que si no se tiene un control riguroso y actualiazciones controladas, se puede quedar atrás las versiones y dejar abiertos vectores de ataque. Por eso es importante revisar constantemente los reportes de vulnerabilidades que genera Checkmarx, para solventar las vulnerabilidades que se identifiquen y mantener la seguridad de la aplicación.

### 3. Revisar dependencias transitivas
Si una librería vulnerable viene indirectamente:
- Forzar override de versión
- Evaluar reemplazo

### 4. Escaneo obligatorio antes de release
Ningún despliegue a producción debe hacerse sin análisis SCA exitoso.

### 5. Monitoreo continuo
El escaneo no es solo en PR. También debe ejecutarse:
- En pipelines de build
- Antes de releases
- De forma programada
